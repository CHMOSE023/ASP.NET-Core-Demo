@using Blazor.Extensions;
@using Blazor.Extensions.Canvas
@using Blazor.Extensions.Canvas.Canvas2D;
@using Blazor.Extensions.Canvas.WebGL

@page "/MyCanvas"

<BECanvas Width="300" Height="400" @ref="_canvasReference"></BECanvas>

@code {
    //private Canvas2DContext _context;

    //protected BECanvasComponent _canvasReference;

    //protected override async Task OnAfterRenderAsync(bool firstRender)
    //{
    //    this._context = await this._canvasReference.CreateCanvas2DAsync();
    //    await this._context.SetFillStyleAsync("red");

    //    await this._context.FillRectAsync(10, 100, 100, 100);

    //    await this._context.SetFontAsync("48px serif");
    //    await this._context.StrokeTextAsync("你好！", 10, 100);
    //}

    private WebGLContext _context;

    protected BECanvasComponent _canvasReference;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        this._context = await this._canvasReference.CreateWebGLAsync();

        await this._context.ClearColorAsync(0, 0, 0, 1);
        await this._context.ClearAsync(BufferBits.COLOR_BUFFER_BIT);
    }
}
